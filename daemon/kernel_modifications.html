<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Kernel Modifications | Pterodactyl</title>
    <meta name="description" content="The open-source server management solution.">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#0e4688">
  <link rel="manifest" href="/favicons/manifest.json">
  <link rel="shortcut icon" href="/favicons/favicon.ico">
  <meta name="msapplication-config" content="/favicons/browserconfig.xml">
  <meta name="theme-color" content="#0e4688">
    
    <link rel="preload" href="/assets/css/0.styles.55a8b33d.css" as="style"><link rel="preload" href="/assets/js/app.121bbbc7.js" as="script"><link rel="preload" href="/assets/js/8.c47125df.js" as="script"><link rel="prefetch" href="/assets/js/9.2548a993.js"><link rel="prefetch" href="/assets/js/2.3b671f57.js"><link rel="prefetch" href="/assets/js/3.72f4a392.js"><link rel="prefetch" href="/assets/js/4.bcd16af4.js"><link rel="prefetch" href="/assets/js/5.e7b8283f.js"><link rel="prefetch" href="/assets/js/6.dffa48f8.js"><link rel="prefetch" href="/assets/js/7.f99055a1.js"><link rel="prefetch" href="/assets/js/10.48b8e7f2.js"><link rel="prefetch" href="/assets/js/11.a55599c3.js"><link rel="prefetch" href="/assets/js/12.de2f5d2b.js"><link rel="prefetch" href="/assets/js/13.7e03768b.js"><link rel="prefetch" href="/assets/js/14.56ee1950.js"><link rel="prefetch" href="/assets/js/15.21b80fc8.js"><link rel="prefetch" href="/assets/js/16.656db705.js"><link rel="prefetch" href="/assets/js/17.2c5dacc7.js"><link rel="prefetch" href="/assets/js/18.77282fd5.js"><link rel="prefetch" href="/assets/js/19.836d8c33.js"><link rel="prefetch" href="/assets/js/20.2e6640c4.js"><link rel="prefetch" href="/assets/js/21.43584830.js"><link rel="prefetch" href="/assets/js/22.3072b5e6.js"><link rel="prefetch" href="/assets/js/23.c3844035.js"><link rel="prefetch" href="/assets/js/24.f74e7ca9.js"><link rel="prefetch" href="/assets/js/25.1492bc08.js"><link rel="prefetch" href="/assets/js/26.61199fc0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.55a8b33d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="nav"><div class="sidebar-button block md:hidden flex-no-shrink"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <div class="logo-container"><a href="/" class="home-link router-link-active"><img src="/pterodactyl-flat.png" class="logo"> <span class="site-name hidden md:inline can-hide">
    Pterodactyl
  </span></a></div> <div class="w-full"><div class="flex"><div class="search-box"><input aria-label="Search" placeholder="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links flex-no-shrink hidden md:flex"><div class="nav-item"><a href="/project/introduction.html" class="nav-link">Get Started
</a></div><div class="nav-item"><a href="https://pterodactyl.io/discord" target="_blank" rel="noopener noreferrer" class="nav-link external">
    Get Help
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <div class="nav-item"><a href="https://github.com/pterodactyl/panel" target="_blank" rel="noopener noreferrer" class="nav-link">
            Contribute
            <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></nav></div></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links flex-no-shrink block md:hidden"><div class="nav-item"><a href="/project/introduction.html" class="nav-link">Get Started
</a></div><div class="nav-item"><a href="https://pterodactyl.io/discord" target="_blank" rel="noopener noreferrer" class="nav-link external">
    Get Help
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <div class="nav-item"><a href="https://github.com/pterodactyl/panel" target="_blank" rel="noopener noreferrer" class="nav-link">
            Contribute
            <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>Project Information</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/project/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/project/about.html" class="sidebar-link">About</a></li><li><a href="/project/terms.html" class="sidebar-link">Terminology</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Panel</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/panel/getting_started.html" class="sidebar-link">Getting Started</a></li><li><a href="/panel/webserver_configuration.html" class="sidebar-link">Webserver Configuration</a></li><li><a href="/panel/upgrading.html" class="sidebar-link">Upgrading</a></li><li><a href="/panel/configuration.html" class="sidebar-link">Environment Configuration</a></li><li><a href="/panel/troubleshooting.html" class="sidebar-link">Troubleshooting</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Daemon</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/daemon/installing.html" class="sidebar-link">Installation</a></li><li><a href="/daemon/upgrading.html" class="sidebar-link">Upgrading</a></li><li><a href="/daemon/configuration.html" class="sidebar-link">Additional Configuration</a></li><li><a href="/daemon/kernel_modifications.html" class="active sidebar-link">Kernel Modifications</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daemon/kernel_modifications.html#update-kernel" class="sidebar-link">Update Kernel</a></li><li class="sidebar-sub-header"><a href="/daemon/kernel_modifications.html#confirm-kernel" class="sidebar-link">Confirm Kernel</a></li><li class="sidebar-sub-header"><a href="/daemon/kernel_modifications.html#set-default-boot" class="sidebar-link">Set Default Boot</a></li></ul></li><li><a href="/daemon/debian_8_docker.html" class="sidebar-link">Docker on Debian 8</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Tutorials</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/tutorials/mysql_setup.html" class="sidebar-link">Setting up MySQL</a></li><li><a href="/tutorials/creating_ssl_certificates.html" class="sidebar-link">Creating SSL Certificates</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Development &amp; Ops</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="kernel-modifications"><a href="#kernel-modifications" aria-hidden="true" class="header-anchor">#</a> Kernel Modifications</h1> <p></p><div class="table-of-contents"><ul><li><a href="#update-kernel">Update Kernel</a></li><li><a href="#confirm-kernel">Confirm Kernel</a></li><li><a href="#set-default-boot">Set Default Boot</a></li></ul></div><p></p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>In most cases, only users with a server provided by OVH will need to make any modifications to their kernel.</p></div> <h2 id="update-kernel"><a href="#update-kernel" aria-hidden="true" class="header-anchor">#</a> Update Kernel</h2> <p>Install the new kernels using apt-get. In this case we are installing the latest version of the kernel,
but feel free to browse using apt-cache search linux-image-extra to find all possible image versions you can
install. You'll want to install the latest.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">apt-get</span> <span class="token function">install</span> linux-image-generic linux-image-extra-virtual
</code></pre></div><p>After you've installed the new kernel you'll need to update the grub loader using the command below. After that, a
server reboot is in order.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">chmod</span> -x /etc/grub.d/06_OVHkernel
<span class="token function">sudo</span> update-grub
<span class="token function">sudo</span> <span class="token function">reboot</span>
</code></pre></div><h2 id="confirm-kernel"><a href="#confirm-kernel" aria-hidden="true" class="header-anchor">#</a> Confirm Kernel</h2> <p>Once you've rebooted, check that the latest kernel is installed using <code>uname -r</code>, it should output <code>4.4.0-131-generic</code>
(in this case) or similar.</p> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>If it still includes <code>-xxxx-grs-ipv6-64</code> or similar, it didn't work and you should move on top the steps below.</p></div> <h2 id="set-default-boot"><a href="#set-default-boot" aria-hidden="true" class="header-anchor">#</a> Set Default Boot</h2> <p>Ok, so unfortunately the easiest way didn't work, but don't worry, we can still fix this. Firstly, lets run a quick
command to list potential kernels, just look at the output and make sure you see your newly installed kernel listed.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">grep</span> <span class="token string">&quot;menuentry '&quot;</span> /boot/grub/grub.cfg
</code></pre></div><p>After running that you should see output similar to the example below.</p> <div class="language-text extra-class"><pre class="language-text"><code>menuentry 'Ubuntu' --class ubuntu --class gnu-linux --class gnu --class os $menuentry_id_option 'gnulinux-simple-ad1a8550-963c-4a9f-b922-85827cf44fbe' {
    menuentry 'Ubuntu, with Linux 4.4.0-131-generic' --class ubuntu --class gnu-linux --class gnu --class os $menuentry_id_option 'gnulinux-4.4.0-131-generic-advanced-ad1a8550-963c-4a9f-b922-85827cf44fbe' {
    menuentry 'Ubuntu, with Linux 4.4.0-131-generic (recovery mode)' --class ubuntu --class gnu-linux --class gnu --class os $menuentry_id_option 'gnulinux-4.4.0-131-generic-recovery-ad1a8550-963c-4a9f-b922-85827cf44fbe' {
    menuentry 'Ubuntu, with Linux 4.4.0-127-generic' --class ubuntu --class gnu-linux --class gnu --class os $menuentry_id_option 'gnulinux-4.4.0-127-generic-advanced-ad1a8550-963c-4a9f-b922-85827cf44fbe' {
    menuentry 'Ubuntu, with Linux 4.4.0-127-generic (recovery mode)' --class ubuntu --class gnu-linux --class gnu --class os $menuentry_id_option 'gnulinux-4.4.0-127-generic-recovery-ad1a8550-963c-4a9f-b922-85827cf44fbe' {
    menuentry 'Ubuntu, with Linux 4.4.0-116-generic' --class ubuntu --class gnu-linux --class gnu --class os $menuentry_id_option 'gnulinux-4.4.0-116-generic-advanced-ad1a8550-963c-4a9f-b922-85827cf44fbe' {
    menuentry 'Ubuntu, with Linux 4.4.0-116-generic (recovery mode)' --class ubuntu --class gnu-linux --class gnu --class os $menuentry_id_option 'gnulinux-4.4.0-116-generic-recovery-ad1a8550-963c-4a9f-b922-85827cf44fbe' {
</code></pre></div><p>As you can see, we have <code>Ubuntu, with Linux 4.4.0-131-generic</code> listed as the first indented option. To boot using this
specific kernel, we will need to modify our grub file.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /etc/default/grub
</code></pre></div><p>Find <code>GRUB_DEFAULT</code>, it is most likely set to <code>GRUB_DEFAULT=0</code>. We're going to modify it a bit to boot our new kernel.</p> <div class="language-text extra-class"><pre class="language-text"><code>GRUB_DEFAULT='Advanced options for Ubuntu&gt;Ubuntu, with Linux 4.4.0-131-generic'
</code></pre></div><p>The only part of the code above that you might need to change is the <code>4.4.0-131-generic</code>, which you can find based on
the kernel version you install. You might also notice that it matches the first indented entry from the grep menuentry
command and also the version of the kernel that we installed above. Once you've done that, run the commands below to
update grub and reboot, and you should be set.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> update-grub
<span class="token function">sudo</span> <span class="token function">reboot</span>
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/pterodactyl/documentation/edit/master/daemon/kernel_modifications.md" target="_blank" rel="noopener noreferrer">Help us improve this page.</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="page-nav"><p class="inner"></p> <div class="prev"><span>
                ← <a href="/daemon/configuration.html">Additional Configuration</a></span></div> <div class="next"><span><a href="/daemon/debian_8_docker.html">Docker on Debian 8</a> →
            </span></div></div> </div></div></div>
    <script src="/assets/js/8.c47125df.js" defer></script><script src="/assets/js/app.121bbbc7.js" defer></script>
  </body>
</html>
